<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Haxemine</title>
  <script src="/socket.io/socket.io.js"></script>
  <script src="js/jquery-1.9.1.js"></script>
  <script src="js/jquery-ui-1.10.1.custom.min.js"></script>
  <script src="http://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
  
  <!--<script type="text/javascript" src="/js/angular.min.js"></script>-->
  <link rel="stylesheet" type="text/css" href="css/base.css">
  
  <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
    var socket = io.connect('http://localhost:8765');
    socket.on('connect', function(msg) {
      console.log("connect");
    });
    $(document).ready(function(){
      
      var fileName = './sampleProject/src/sample.txt';
      $.ajax({
        url: 'src',
        data: {fileName: fileName},
        type: 'GET',
        success: function(file){
          var text = file.text;
          console.log(text);
          var editor = ace.edit("editor");
          editor.setTheme("ace/theme/eclipse");
          editor.getSession().setValue(text);
          editor.getSession().setMode("ace/mode/" + file.mode);
          editor.commands.addCommand({
            Name : "savefile",
            bindKey: {
              win : "Ctrl-S",
              mac : "Command-S"
            },
            exec: function(editor) {
              socket.emit('save', {
                fileName : fileName,
                text: editor.getSession().getValue()
              });
            }
            
            
          });
        }
      });
      
    });
    
    </script>
</head>
<body>
<div id="file-selector"></div>
<div id="editor"></div>
</body>
</html>